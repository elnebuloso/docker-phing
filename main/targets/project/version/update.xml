<?xml version="1.0" encoding="UTF-8"?>


<project default="project:version:update">


    <target name="project:version:update:init" depends="commons:init">
        <property name="projectVersionUpdateDescription" value="update the project version in major/minor/patch level"/>
        <property name="releaseType" value="Bugfix"/>
    </target>


    <target name="project:version:update:help" depends="project:version:update:init">
        <echo message="${projectVersionUpdateDescription}"/>

        <echo message=""/>
        <echo message="property       value"/>
        <echo message="----------------------------------------------------------------------------------------------------"/>
        <echo message="releaseType    ${releaseType} [Major|Minor|Bugfix]"/>
    </target>


    <target name="project:version:update" depends="project:version:update:init, project:version:update:before, project:version:update:main, project:version:update:after">
        <echo message="successful"/>
    </target>


    <target name="project:version:update:before" hidden="true">
        <echo message="no actions defined"/>
    </target>


    <target name="project:version:update:after" hidden="true">
        <echo message="no actions defined"/>
    </target>


    <target name="project:version:update:main">
        <my-semver string="${projectVersion}" version="projectVersion" major="projectVersionMajor" minor="projectVersionMinor" patch="projectVersionPatch"/>
        <echo message="version [curr]: ${projectVersion}"/>
        <echo message="major: ${projectVersionMajor}"/>
        <echo message="minor: ${projectVersionMinor}"/>
        <echo message="patch: ${projectVersionPatch}"/>

        <version releasetype="${releaseType}" file="${projectRoot}/VERSION" property="projectVersion"/>

        <my-semver string="${projectVersion}" version="projectVersion" major="projectVersionMajor" minor="projectVersionMinor" patch="projectVersionPatch"/>
        <echo message="version [next]: ${projectVersion}"/>
        <echo message="major: ${projectVersionMajor}"/>
        <echo message="minor: ${projectVersionMinor}"/>
        <echo message="patch: ${projectVersionPatch}"/>
    </target>


</project>